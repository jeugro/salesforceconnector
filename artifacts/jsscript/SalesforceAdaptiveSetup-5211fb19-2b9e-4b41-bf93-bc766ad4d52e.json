{
	"id": "5211fb19-2b9e-4b41-bf93-bc766ad4d52e",
	"createdAt": "2022-06-04T06:07:42.000Z",
	"createdBy": "ole-andre.haugen@neptune-software.com",
	"globalScripts": [],
	"externalModules": [],
	"entitySets": [
		{
			"id": "0a8bfac1-07cd-4bfc-bddb-85562ea67e3a",
			"name": "p9_sf_connector",
			"contextname": "p9_sf_connector"
		}
	],
	"apis": [],
	"name": "SalesforceAdaptiveSetup",
	"ver": "22.10.29.144",
	"description": "Get FieldCatalog",
	"content": [
		"==OBJECT STRING==",
		"let fieldCatalog = [];\r",
		"\r",
		"const connector = await entities.p9_sf_connector.findOne({\r",
		"    select: [\"metadata\"],\r",
		"    where: {\r",
		"        id: req.body._connector.settings.startParam\r",
		"    }\r",
		"});\r",
		"\r",
		"if (!connector) return complete();\r",
		"\r",
		"//  Fields\r",
		"connector.metadata.fields.forEach(function (field, index, array) {\r",
		"\r",
		"    if (!field.enableSel && !field.enableRun) return;\r",
		"\r",
		"    let usage = \"BOTH\";\r",
		"    let type = \"string\";\r",
		"    let items = [];\r",
		"\r",
		"    // Type\r",
		"    switch (field.type) {\r",
		"\r",
		"        case \"boolean\":\r",
		"            type = \"boolean\";\r",
		"            break;\r",
		"\r",
		"        case \"datetime\":\r",
		"            type = \"timestamp\";\r",
		"            break;\r",
		"\r",
		"        default:\r",
		"            break;\r",
		"\r",
		"    }\r",
		"\r",
		"    // Usage\r",
		"    if (field.enableSel && !field.enableRun) usage = \"INPUT\";\r",
		"    if (!field.enableSel && field.enableRun) usage = \"OUTPUT\";\r",
		"\r",
		"    // Items \r",
		"    if (field.picklistValues) {\r",
		"        field.picklistValues.forEach(function (field, index, array) {\r",
		"            items.push({\r",
		"                key: field.value,\r",
		"                text: field.label\r",
		"            })\r",
		"        })\r",
		"    }\r",
		"\r",
		"    // Items - DateTimeStamp\r",
		"    if (field.type === \"datetime\") {\r",
		"        items.push({ key: \"YESTERDAY\", text: \"Yesterday\" });\r",
		"        items.push({ key: \"TODAY\", text: \"Today\" });\r",
		"        items.push({ key: \"TOMORROW\", text: \"Tomorrow\" });\r",
		"        items.push({ key: \"LAST_WEEK\", text: \"Last Week\" });\r",
		"        items.push({ key: \"THIS_WEEK\", text: \"This Week\" });\r",
		"        items.push({ key: \"NEXT_WEEK\", text: \"Next Week\" });\r",
		"        items.push({ key: \"LAST_MONTH\", text: \"Last Month\" });\r",
		"        items.push({ key: \"THIS_MONTH\", text: \"This Month\" });\r",
		"        items.push({ key: \"NEXT_MONTH\", text: \"Next Month\" });\r",
		"        items.push({ key: \"LAST_90_DAYS\", text: \"Last 90 Days\" });\r",
		"        items.push({ key: \"NEXT_90_DAYS\", text: \"Next 90 Days\" });\r",
		"        items.push({ key: \"THIS_QUARTER\", text: \"This Quarter\" });\r",
		"        items.push({ key: \"LAST_QUARTER\", text: \"Last Quarter\" });\r",
		"        items.push({ key: \"NEXT_QUARTER\", text: \"Next Quarter\" });\r",
		"        items.push({ key: \"THIS_YEAR\", text: \"This Year\" });\r",
		"        items.push({ key: \"LAST_YEAR\", text: \"Last Year\" });\r",
		"        items.push({ key: \"NEXT_YEAR\", text: \"Next Year\" });\r",
		"    }\r",
		"\r",
		"    fieldCatalog.push({\r",
		"        name: field.name,\r",
		"        label: field.label,\r",
		"        type: type,\r",
		"        usage: usage,\r",
		"        items: items\r",
		"    });\r",
		"\r",
		"});\r",
		"\r",
		"result.data = fieldCatalog;\r",
		"complete();"
	],
	"useAsGlobalScript": false,
	"isTypescript": false,
	"transpiledContent": null,
	"lastRunSuccessful": true,
	"jsscriptGroup": "8724ce1d-db36-43cb-a923-3e0be5432b2a",
	"package": "ace216dd-a722-4e40-9d39-6049629fca12"
}